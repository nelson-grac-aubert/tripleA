<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="widtd=device-widtd, initial-scale=1.0">
    <link href="template.css" rel="stylesheet" />
    <script src="./script.js"></script> <!--script js perso -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!--script chart-->
    <meta http-equiv="refresh" content="30">    <!--refresh every 30 sec-->
    <meta id="page-timestamp" name="timestamp" content=""> <!--meta tag for timestamp -->
    <title>TripleA</title>
</head>
<body>
    <header>
        <h1>Dashboard</h1>
    </header>
    <main>
        <section id="system">
            <h2>Système</h2>
            <div class="card">
                <div>Nom de la machine : {{machine_name_placeholder}}</div>
                <div>Système d'exploitation : {{operating_system_placeholder}}</div>
                <div>Heure d'allumage : {{start_time_placeholder}}</div>
                <div>Uptime : {{up_time_placeholder}}</div>
                <div>Nombre d'utilisateur : {{user_count_placeholder}}</div>
            </div>
        </section>
            <section id="network">
                <h2>Réseau</h2>
                <div class="card">
                <div>Adresse principale : {{ip_address_placeholder}}</div>
                </div>
            </section>
        <section id="cpu">
            <h2>CPU</h2>
            <div class="card">
                <div>Nombre de coeurs : {{cpu_heart_count_placeholder}}</div>
                <div>Fréquence : {{cpu_frequency_placeholder}} MHz</div>
                <div>Pourcentage d'utilisation : {{cpu_usage_percent_placeholder}} %</div>
            </div>
            <div class="card">
                <h3>Charge système moyenne</h3><br>
                <div>Dernière minute : {{load_1_placeholder}}</div>
                <div>Dernière 5 minutes : {{load_5_placeholder}}</div>
                <div>Dernière 15 minutes : {{load_15_placeholder}}</div>
            </div>
        </section>
        <section id="memory">
            <h2>Mémoire</h2>
            <div class="card">    
                <div>RAM total (GB ): {{total_ram_gb_placeholder}}</div>
                <div>RAM utilisée (GB) : {{used_ram_gb_placeholder}}</div>
                <div>Pourcentage (%) : {{used_ram_percent_placeholder}} </div>    
            </div>
            <div class="card">    
                <div>Mémoire totale : {{total_storage_gb}}</div>
                <div>Mémoire utilisée (GB) : {{used_storage_gb}}</div>
                <div>Mémoire utilisée (%) : {{used_storage_percent}}</div>
            </div>
        </section>
        <section id="process">
            <h2>Processus</h2>
            <div id="process_table_top3">
                <h3>Processus les plus gourmands</h3>
                <div class="card">
                   <li>RAM
                        <ol>{{processus1_ram_usage_placeholder}}</ol>
                        <ol>{{processus2_ram_usage_placeholder}}</ol>
                        <ol>{{processus3_ram_usage_placeholder}}</ol>
                   </li>
                    <li>CPU
                        <ol>{{processus1_cpu_usage_placeholder}}</ol>
                        <ol>{{processus2_cpu_usage_placeholder}}</ol>
                        <ol>{{processus3_cpu_usage_placeholder}}</ol>
                   </li>
                </div>
            </div>
        </section>
        <section id="files">
            <h2>Fichier</h2> 
            <div>
                <h3>Dossier analysé : {{analysed_directory_placeholder}}</h3>
                <table class="card">
                    <tr>
                        <th>Type de fichier</th>
                        <th>Nombre</th>
                        <th>Pourcentage</th>
                    </tr>
                    <tr>
                        <th>.txt</th>
                        <td>{{number_txt_placholder}}</td> 
                        <td>{{percent_txt_placholder}}</td>
                    </tr>
                        <tr>
                        <th>.py</th>
                        <td>{{number_py_placholder}}</td>
                        <td>{{percent_py_placholder}}</td>
                    </tr>
                        <tr>
                        <th>.pdf</th>
                        <td>{{number_pdf_placholder}}</td>
                        <td>{{percent_pdf_placholder}}</td>
                    </tr>
                        <tr>
                        <th>.jpg</th>
                        <td>{{number_jpg_placholder}}</td>
                        <td>{{percent_jpg_placholder}}</td>
                    </tr>
                </table>
            </div>
            <canvas id="pie_chart" style="width:100%;max-width:200px"></canvas>
        </section>
    </main>
    <footer>
        <p id="timestamp"></p>
        <p>Version 1.0</p>
    </footer>
        <!--script chart-->
        <script>
        const xValues = [".txt", ".py", ".pdf", ".jpg"];
        const yValues = [{{percent_txt_placholder}},{{percent_py_placholder}},{{percent_pdf_placholder}},{{percent_jpg_placholder}}];  
        const barColors = [
        "#E3E3E3",
        "#456882",
        "#234C6A",
        "#1B3C53"
        ];
        const ctx = document.getElementById('pie_chart');

        new Chart(ctx, {
        type: "pie",
        data: {
            labels: xValues,
            datasets: [{
            backgroundColor: barColors,
            data: yValues
            }]
        },
        options: {
            plugins: {
            legend: {display:true},
            title: {
                display: true,
                text: "Pourcentage des fichiers dans le dossier",
                font: {size:16}
            }
            }
        }
        });
        </script>
</body>
</html>