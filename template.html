<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="widtd=device-widtd, initial-scale=1.0">
    <link href="template.css" rel="stylesheet" />
    <script src="https://bernii.github.io/gauge.js/dist/gauge.min.js"></script> <!--script gauge TODO remove-->
    <script src="./script.js"></script> <!--script js perso -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!--need internet connexion to work-->
    <meta http-equiv="refresh" content="30">    <!--refresh every 30 sec-->
    <meta id="page-timestamp" name="timestamp" content=""> <!--meta tag for timestamp -->
    <title>TripleA</title>
</head>
<body>
    <header>
        <h1>Dashboard</h1>
    </header>
    <main>
        <section id="system">
            <h2>Systeme</h2>
            <div class="card">
                <div>Nom de la machine : {{machine_name_placeholder}}</div>
                <div>systeme d'exploitation : {{operating_system_placeholder}}</div>
                <div>heure d'allumage : {{start_time_placeholder}}</div>
                <div>uptime : {{up_time_placeholder}}</div>
                <div>nombre d'utilisateur : {{user_count_placeholder}}</div>
            </div>
        </section>
        <section id="cpu">
            <h2>CPU</h2>
            <div class="card">
                <div>Nombre de coeurs : {{cpu_heart_count_placeholder}}</div>
                <div>fréquence : {{cpu_frequency_placeholder}} MHz</div>
                <div>pourcentage d'utilisation : {{cpu_usage_percent_placeholder}} %</div>
                <canvas id="gauge_percent" widtd="auto" height="100"></canvas>
            </div>
        </section>
        <section id="memory">
            <h2>Mémoire</h2>
            <div class="card">    
                <div>RAM total :{{total_ram_gb_placeholder}}GB</div>
                <div>RAM utilisée : {{used_ram_gb_placeholder}}GB</div>
                <div>Pourcentage : {{used_ram_percent_placeholder}} % </div>
                <!--<canvas id="gauge_ram" widtd="auto" height="100"></canvas>--><!--TODO DELETE canvas for gauge linked to script by id-->
                <canvas id="myChart" style="width:200px;max-width:200px"></canvas> 
            </div>
            <div class="card">    
                <div>Mémoire totale : {{total_storage_gb}}</div>
                <div>Mémoire utilisée (GB) : {{used_storage_gb}}</div>
                <div>Mémoire utilisée (%) : {{used_storage_percent}}</div>
            </div>
        </section>
        <section id="network">
            <h2>Réseau</h2>
            <div class="card">adresse principale : {{ip_address_placeholder}}</div>
        </section>
        <section id="process">
            <h2>Processus</h2>

            <div id="process_table_top3">
                <h3>Processus les plus gourmands</h3>
                <div class="card">
                   <li>RAM
                    <ol>{{processus1_ram_usage_bytes_placeholder}}</ol>
                    <ol>{{processus2_ram_usage_bytes_placeholder}}</ol>
                    <ol>{{processus3_ram_usage_bytes_placeholder}}</ol>
                   </li>

                       <li>CPU
                    <ol>{{processus1_cpu_usage_bytes_placeholder}}</ol>
                    <ol>{{processus2_cpu_usage_bytes_placeholder}}</ol>
                    <ol>{{processus3_cpu_usage_bytes_placeholder}}</ol>
                   </li>
            
                     <canvas id="bar_chart"></canvas>
                     <script>
                    const ctx = document.getElementById('bar_chart');

                    new Chart(ctx, {
                        type: 'bar',
                        data: {
                        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
                        datasets: [{
                            label: '# of Votes',
                            data: [12, 19, 3, 5, 2, 3],
                            borderWidth: 1
                        }]
                        },
                        options: {
                        scales: {
                            y: {
                            beginAtZero: true
                            }
                        }
                        }
                    });
                    </script>

                   <!-- <tr>
                        <th>Processus</th>
                        <th>CPU %</th>
                        <th>RAM %</th>
                    </tr>
                    <tr>
                        <td>{{most_demanding_processus_1_placeholder}}</td>
                        <td>{{processus1_cpu_usage_percent_placeholder}}</td>
                        <td>{{processus1_ram_usage_bytes_placeholder}}</td>
                    </tr>
                    <tr>
                        <td>{{most_demanding_processus_2_placeholder}}</td>
                        <td>{{processus2_cpu_usage_percent_placeholder}}</td>
                        <td>{{processus2_ram_usage_bytes_placeholder}}</td>
                    </tr>
                    <tr>
                        <td>{{most_demanding_processus_3_placeholder}}</td>
                        <td>{{processus3_cpu_usage_percent_placeholder}}</td>
                        <td>{{processus3_ram_usage_bytes_placeholder}}</td>
                    </tr>-->
                </div>
                <h3>Liste des processus</h3>
                <div id="process_list">
                    {% for process in {{most_demanding_processus_placeholder}} %}
                    <p>{{process}}</p>
                        {% endfor %}
                </div>
            </div>
        </section>
        <section id="files">
            <h2>Fichier</h2> <!--TODO check if id is useful-->
            <div>Dossier analysé : {{analysed_directory_placeholder}}
            <table class="card">
                <tr>
                    <th>type</th>
                    <th>nombre</th>
                    <th>%</th>
                </tr>
                <tr>
                    <th>.txt</th>
                    <td>{{number_txt_placholder}}</td>
                    <td>{{percent_txt_placholder}}</td>
                </tr>
                    <tr>
                    <th>.py</th>
                    <td>{{number_py_placholder}}</td>
                    <td>{{percent_py_placholder}}</td>
                </tr>
                    <tr>
                    <th>.pdf</th>
                    <td>{{number_pdf_placholder}}</td>
                    <td>{{percent_pdf_placholder}}</td>
                </tr>
                    <tr>
                    <th>.jpg</th>
                    <td>{{number_jpg_placholder}}</td>
                    <td>{{percent_jpg_placholder}}</td>
                </tr>
            </table>

            </div>
        </section>
    </main>

    <footer>
         <p>
            <a href="/pdf" target="_blank"><!--TODO working link-->
            <button id="button">Télécharger le Dashboard en PDF</button>
            </a>
        </p>
       
        <p id="timestamp"></p>
        <script>   //timestamp
            const now = new Date();
            document.getElementById("timestamp").textContent =
            "Dernière Mise a jour : " + now.toLocaleString();
        </script>
        

    </footer><!--TODO avec informations de génération--> 

        <script>
        const xValues = ["Italy", "France", "Spain", "USA", "Argentina"];
        const yValues = [55, 49, 44, 24, 15];  
        const barColors = [
        "#b91d47",
        "#00aba9",
        "#2b5797",
        "#e8c3b9",
        "#1e7145"
        ];

        const ctx = document.getElementById('myChart');

        new Chart(ctx, {
        type: "pie",
        data: {
            labels: xValues,
            datasets: [{
            backgroundColor: barColors,
            data: yValues
            }]
        },
        options: {
            plugins: {
            legend: {display:true},
            title: {
                display: true,
                text: "A COMPLETER",
                font: {size:16}
            }
            }
        }
        });
        </script>
    

</body>
</html>